---
title: 着色器可见描述符堆
description: 着色器可见描述符堆是着色器可通过描述符表引用的描述符堆。
ms.assetid: 37691fd1-212d-4786-ac9c-861c1a6a4918
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e5258a9248063e1f80fc6b5738d7fd8f496be3e2
ms.sourcegitcommit: 05483887ef8fccd79543cc1b89495f156702465a
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/29/2019
ms.locfileid: "66295965"
---
# <a name="shader-visible-descriptor-heaps"></a>着色器可见描述符堆

着色器可见描述符堆是着色器可通过描述符表引用的描述符堆。

-   [概述](#overview)
-   [示例](#an-example)
-   [相关主题](#related-topics)

## <a name="overview"></a>概述

着色器可通过描述符表引用的描述符堆有以下两种类型：第一种堆类型，D3D12\_SRV\_UAV\_CBV\_DESCRIPTOR\_HEAP，可以保存全部混杂在一起的着色器资源视图、无序访问视图和常量缓冲区视图。 堆中的任何给定位置都可以是列出的描述符类型之一。 另一种堆类型，D3D12\_DESCRIPTOR\_HEAP\_TYPE\_SAMPLER，只存储采样器，这反映出对大多数硬件来说，采样器是与 SRV、UAV 和 CBV 分开管理的。

可能要求这些类型的描述符堆为着色器可见，也可能要求创建堆时为不可见（后者非着色器可见，对于在 CPU 上暂存描述符非常有用）。 要求为着色器可见时，上述每种堆类型都可能对任何单个描述符堆分配有硬件大小限制。

应用程序可以创建任意数量的描述符堆，并且非着色器可见描述符堆的大小不受限制。 如果应用程序创建的着色器可见描述符堆小于硬件大小限制，则驱动程序可以选择从较大的基础描述符堆中二次分配描述符堆，以便多个 API 描述符堆适合于一个硬件描述符堆。 可能发生这种情况的原因是，对于某些硬件，执行期间在硬件描述符堆之间进行切换需要 GPU 等待空闲（以确保对之前的描述符堆的 GPU 引用已经完成）。 如果应用程序创建的所有描述符堆都符合适用硬件堆的最大容量，那么渲染期间切换 API 描述符堆时就不会发生这种等待。 但应用程序必须考虑到切换当前描述符堆可能导致等待空闲的可能性。

为了避免切换描述符堆时受此可能发生的等待空闲影响，应用程序可以在渲染时利用时间间隔，而这将导致 GPU 在切换描述符堆时由于其他原因处于空闲状态，因为任何情况下等待空闲都会发生。

API 参考中介绍了用于在命令列表/捆绑记录期间将标识描述符堆标识为着色器的机制和语义。

## <a name="an-example"></a>示例

下图显示了两个描述符堆，它们引用了存储在大型默认堆的两个槽中的两个独立 2D 纹理。 图形管道（包括着色器）可以访问着色器可见的描述符堆，因此管道可以使用 2D 纹理。

![可见和非可见描述符堆](images/descriptor-heaps.png)

> [!Note]  
> 对于描述符堆，通常对 CPU 可写入的 GPU 本地内存（称为写组合内存）数量的 GPU 硬件有限制。 通常对于所有进程而言，此限制为 96MB 左右。 例如，具有 32 字节描述符的 100 万成员描述符堆将使用 32MB。 如果必要，驱动程序将转而依靠系统内存，但最好不要创建大量的大型描述符堆。

 

## <a name="related-topics"></a>相关主题

<dl> <dt>

[描述符堆](descriptor-heaps.md)
</dt> </dl>

 

 




